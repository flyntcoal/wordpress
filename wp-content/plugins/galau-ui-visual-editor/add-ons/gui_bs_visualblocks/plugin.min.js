tinymce.PluginManager.add("gui_bs_visualblocks",function(a,b){function c(){var b=this;b.active(k),a.on("gui_bs_visualblocks",function(){b.active(a.dom.hasClass(a.getBody(),"gui_bs_visualblocks"))})}var d,e=(tinymce.util.Tools.each,tinymce.Env,a.dom,[b+"/assets/css/plugin.min.css"]);"object"==typeof a.settings.gui_bs_visualblocks&&(d=a.settings.gui_bs_visualblocks);var f=!0;if("object"==typeof d?("undefined"!=typeof d.css?d.css.exist?1==window.galau_ui_debug&&console.log("visualblocks => css: exist"):d.css.external?(e.push(d.css.external),1==window.galau_ui_debug&&console.log("visualblocks => css: external")):(e.push(b+"/assets/css/bootstrap.min.css"),1==window.galau_ui_debug&&console.log("visualblocks => css: internal")):(e.push(b+"/assets/css/bootstrap.min.css"),1==window.galau_ui_debug&&console.log("visualblocks => css: internal")),f=d.toolbar_text?!0:!1):(e.push(b+"/assets/css/bootstrap.min.css"),1==window.galau_ui_debug&&console.log("visualblocks => css: internal")),"undefined"!=typeof a.settings.content_css)if("function"==typeof a.settings.content_css.push)for(var g=0;g<e.length;g++)a.settings.content_css.push(e[g]);else if("string"==typeof a.settings.content_css){a.settings.content_css=[a.settings.content_css];for(var g=0;g<e.length;g++)a.settings.content_css.push(e[g])}else a.settings.content_css=e;else a.settings.content_css=e;"undefined"==typeof a.settings.extended_valid_elements&&(a.settings.extended_valid_elements="*[*]"),"undefined"==typeof a.settings.valid_elements&&(a.settings.valid_elements="*[*]"),1==window.galau_ui_debug&&(console.log("visualblocks => valid: ",a.settings.valid_elements),console.log("visualblocks => extended_valid: ",a.settings.extended_valid_elements)),a.on("init",function(){if(document.createStyleSheet)for(var b=0;b<e.length;b++)document.createStyleSheet(e[b]);else for(var b=0;b<e.length;b++)cssLink=a.dom.create("link",{rel:"stylesheet",href:e[b]}),document.getElementsByTagName("head")[0].appendChild(cssLink)});var h="";f&&(h="Visualblocks");var i,j,k;window.NodeList&&(a.addCommand("gui_bs_visualblocks",function(){var c,d=a.dom;i||(i=d.uniqueId(),c=d.create("link",{id:i,rel:"stylesheet",href:b+"/assets/css/visualblocks.css"}),a.getDoc().getElementsByTagName("head")[0].appendChild(c)),a.on("PreviewFormats AfterPreviewFormats",function(b){k&&d.toggleClass(a.getBody(),"gui_bs_visualblocks","afterpreviewformats"==b.type)}),d.toggleClass(a.getBody(),"gui_bs_visualblocks"),k=a.dom.hasClass(a.getBody(),"gui_bs_visualblocks"),j&&j.active(d.hasClass(a.getBody(),"gui_bs_visualblocks")),a.fire("gui_bs_visualblocks")}),a.addButton("gui_bs_visualblocks",{title:"Show Bootstrap blocks",icon:"guicon-view-grid guicon guicon-view-grid",cmd:"gui_bs_visualblocks",text:h,onPostRender:c}),a.addMenuItem("gui_bs_visualblocks",{text:"Bootstrap blocks",icon:"guicon-view-grid guicon guicon-view-grid",cmd:"gui_bs_visualblocks",onPostRender:c,selectable:!0,context:"view",prependToContext:!0}),a.on("init",function(){"object"==typeof d&&d.default_state&&(a.execCommand("gui_bs_visualblocks",!1,null,{skip_focus:!0}),1==window.galau_ui_debug&&console.log("visualblocks => ON"))}),a.on("remove",function(){a.dom.removeClass(a.getBody(),"gui_bs_visualblocks")}))});